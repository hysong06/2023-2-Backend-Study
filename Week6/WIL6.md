# \[1] ë°ì´í„°ë² ì´ìŠ¤

ë°ì´í„°ë² ì´ìŠ¤(DB, DataBase)ë€ ì—¬ëŸ¬ ì‚¬ëŒì— ì˜í•´ ê³µìœ ë˜ì–´ ì‚¬ìš©ë  ëª©ì ìœ¼ë¡œ í†µí•©í•˜ì—¬ ê´€ë¦¬ë˜ëŠ”Â ë°ì´í„°ì˜ ì§‘í•©ì„ ë§í•œë‹¤.
ìë£Œë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ì—ëŠ” SQL(Structured Query Language)ê³¼ NoSQLì´ ìˆë‹¤.

## 1) SQL

SQLì€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤(RDB, Relational DataBase)ë¥¼ ë‹¤ë£¬ë‹¤.
ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” í–‰ê³¼ ì—´ì„ í†µí•´ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ”ë°, ê° ì—´ì€ í•˜ë‚˜ì˜ ì†ì„±ì— ëŒ€í•œ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  í–‰ì—ëŠ” ê° ì—´ì˜ ë°ì´í„° í˜•ì‹ì— ë§ëŠ” ë°ì´í„°ê°€ ì €ì¥ëœë‹¤.
ë¯¸ë¦¬ ì‘ì„±ëœ ìŠ¤í‚¤ë§ˆë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì •í•´ì§„ í˜•ì‹ì— ë§ê²Œ ë°ì´í„°ë¥¼ ì €ì¥í•´ì•¼ í•œë‹¤.

SQLì€ ë°ì´í„° ìˆ˜ì •ì´ ë¹ˆë²ˆí•˜ê³ , êµ¬ì¡°ì˜ ì¤‘ìš”ë„ê°€ ë†’ì€ ê²½ìš° ì£¼ë¡œ í™œìš©ëœë‹¤.

## 2) NoSQL

NoSQLì€ non SQL, Non-relational Operation SQL, Not Only SQL ì •ë„ì˜ ì˜ë¯¸ë¥¼ ê°–ëŠ”ë‹¤.

NoSQLì€ ê¸°ì¡´ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì˜ ë‹¨ì ì„ ê·¹ë³µí•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ê²ƒìœ¼ë¡œ, ë¹„ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤(Non-Relational DataBase)ë¥¼ ë‹¤ë£¬ë‹¤.
ë¹„ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” key-value, ë¬¸ì„œ, ê·¸ë˜í”„ ë“± ë‹¤ì–‘í•œ ë°ì´í„° ì €ì¥ ë°©ì‹ì„ í™œìš©í•¨ìœ¼ë¡œì¨ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì— ë¹„í•´ ìœ ì—°í•˜ê³  í™•ì¥ì„±ì´ ë†’ë‹¤.

NoSQLì€ ë°ì´í„° ìˆ˜ì •ì´ ì ê³ , ì •í™•í•œ ë°ì´í„° êµ¬ì¡°ë¥¼ ì•Œ ìˆ˜ ì—†ê±°ë‚˜ ë³€ê²½ ë° í™•ì¥ë  ê²½ìš° ì£¼ë¡œ í™œìš©ëœë‹¤.

***
# \[2] ìë°” í´ë˜ìŠ¤ì™€ ë°ì´í„°ë² ì´ìŠ¤ ê°„ ë§¤í•‘

## 1) ORM

ë°ì´í„°ë² ì´ìŠ¤ì— ë„£ì„ ê°ì²´ë¥¼ ì—”í‹°í‹°(Entity)ë¼ê³  í•˜ëŠ”ë°, ORM(Object-Relational Mapping)ì€ SQLì´ ì•„ë‹Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ ì–¸ì–´ë¡œ ì—”í‹°í‹°ë¥¼ ì¡°ì‘í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‰½ê²Œ ë‹¤ë£° ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê¸°ìˆ ì´ë‹¤.

ORMì€ ê°œë°œ ì–¸ì–´ì˜ ì¼ê´€ì„±ê³¼ ê°€ë…ì„±ì„ ë†’ì—¬ì¤€ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.
í•˜ì§€ë§Œ ORMì€ SQLë¡œ ì‘ì„±í•œ ì¿¼ë¦¬ë³´ë‹¤ ë¹„íš¨ìœ¨ì ì¼ ìˆ˜ ìˆê³ , ë³µì¡í•œ ì¿¼ë¦¬ë‚˜ íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™” ê¸°ìˆ ì„ ì‚¬ìš©í•˜ê¸° ì–´ë µë‹¤ëŠ” í•œê³„ ë˜í•œ ì¡´ì¬í•œë‹¤.

## 2) JPA

JPA(Java Persistence API)ëŠ” ìë°” ORM ê¸°ìˆ  í‘œì¤€ì´ ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë“¤ì„ ëª¨ì•„ë†“ì€ ê²ƒì´ë‹¤.
JPAë¥¼ êµ¬í˜„í•œ ê²ƒìœ¼ë¡œ ëŒ€í‘œì ìœ¼ë¡œ Hibernateê°€ ìˆë‹¤.

JPAëŠ” `EntityManager`ë¥¼ í†µí•´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸(PersistenceContext)ë¥¼ ê´€ë¦¬í•œë‹¤.
ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ì´ì—ì„œ ê°ì²´ë¥¼ ë³´ê´€í•˜ëŠ” ë…¼ë¦¬ì ì¸ ê°œë…ì´ë‹¤.
ì´ëŠ” 1ì°¨ì ì¸ ìºì‹±, ì—”í‹°í‹°ì˜ ìƒëª… ì£¼ê¸° ê´€ë¦¬, ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆì˜ ìë™ ìƒì„± ë° ì—…ë°ì´íŠ¸ ë“±ì˜ ì—­í• ì„ í•œë‹¤.

JPAëŠ” `@Entity`ê°€ ë¶™ì€ ìë°” í´ë˜ìŠ¤ë¥¼ ê´€ë¦¬í•˜ë©°, ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ê³¼ í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ë§¤í•‘í•´ì¤€ë‹¤.

```java
@Entity
@NoArgsConstructor(access = AccessLevel.PROTECTED)
public class Member {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @OneToMany(fetch = FetchType.LAZY)
    private List<Feed> feeds;

    private String name;
}
```

## 3) ERD

ERD(Entity-Relation Diagram)ëŠ” ìˆ˜ë§ì€ ì—”í‹°í‹°ë“¤ ì‚¬ì´ì˜ ê´€ê³„ë¥¼ ì„¤ëª…í•´ì£¼ëŠ” ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œ, í”„ë¡œì íŠ¸ì— ì‚¬ìš©ë˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì˜ êµ¬ì¡°ë¥¼ ì‰½ê²Œ íŒŒì•…í•˜ëŠ” ë° ë„ì›€ì„ ì¤€ë‹¤.
ìë°”ì—ì„œëŠ” `@OneToOne`, `@OneToMany`, `@ManyToOne` ë“±ì˜ ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ ERDë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

### 1. @OneToOne (1:1)

1:1 ê´€ê³„ëŠ” í•œ ì—”í‹°í‹°ê°€ ì˜¤ì§ í•˜ë‚˜ì˜ ë‹¤ë¥¸ ì—”í‹°í‹°ì™€ ê´€ê³„ë¥¼ ë§ºëŠ” ê²ƒì„ ëœ»í•œë‹¤.
ê°€ë ¹ ëŒ€í•œë¯¼êµ­ì€ ì¼ë¶€ì¼ì²˜ì œì´ë¯€ë¡œ ë‚¨í¸ ê°œì²´ì™€ ì•„ë‚´ ê°œì²´ëŠ” ì„œë¡œë¥¼ í•˜ë‚˜ë§Œ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.

```java
@Entity
@NoArgsConstructor(access = AccessLevel.PROTECTED)
public class Husband {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @OneToOne
    private Wife wife;
    
	private String name;
}
```

```java
@Entity
@NoArgsConstructor(access = AccessLevel.PROTECTED)
public class Wife {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @OneToOne
    private Husband husband;
    
	private String name;
}
```

### 2. @OneToMany (1:N)

í•œ ë¶€ì„œì—ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì—¬ëŸ¬ ì‚¬ëŒë“¤ì´ ì†Œì†ë  ìˆ˜ ìˆë‹¤.
ê·¸ëŸ¬ë‚˜ ë³´í†µ í•œ ê°œì¸ì€ í•œ ë¶€ì„œì—ë§Œ ì†Œì†ëœë‹¤.
ì´ëŸ¬í•œ ê´€ê³„ë¥¼ 1:N ê´€ê³„ë¼ê³  ì¹­í•œë‹¤.

```java
@Entity
@NoArgsConstructor(access = AccessLevel.PROTECTED)
public class Department {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @OneToMany(fetch = FetchType.LAZY)
    private List<Employee> employees;
    
    private String name;
}
```

```java
@Entity
@NoArgsConstructor(access = AccessLevel.PROTECTED)
public class Employee {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @ManyToOne
    private Department department;
    
    private String name;
}
```

ë§Œì•½ Departmentì—ì„œ Employeeë¡œì˜ ì ‘ê·¼ì´ ë¶ˆí•„ìš”í•˜ë‹¤ë©´ Department í´ë˜ìŠ¤ ì½”ë“œì—ì„œ `@OneToMany(fetch = FetchType.LAZY) private List<Employee> employees` ë¶€ë¶„ì„ ìƒëµí•  ìˆ˜ ìˆë‹¤.
ê°œì²´ ê°„ ì ‘ê·¼ì´ ì–‘ë°©í–¥ìœ¼ë¡œ ê°€ëŠ¥í•˜ë„ë¡ í• ì§€, í•œ ë°©í–¥ìœ¼ë¡œë§Œ ê°€ëŠ¥í•˜ë„ë¡ í• ì§€ëŠ” í”„ë¡œê·¸ë˜ë¨¸ì˜ ì„¤ê³„ì— ë‹¬ë ¸ë‹¤.

### 3. @ManyToMany (M:N)

ì„œì  ê³ ê°ë“¤ì€ ê°ìê°€ ì›í•˜ëŠ” ì±…ì„ ë§ˆìŒê» êµ¬ë§¤í•  ìˆ˜ ìˆë‹¤.
ì´ëŸ¬í•œ ê´€ê³„ë¥¼ M:N ê´€ê³„ë¼ê³  ì¹­í•œë‹¤.

```java
@Entity
@NoArgsConstructor(access = AccessLevel.PROTECTED)
public class Book {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @ManyToMany
    private List<Client> clients;
    
    private String name;
}
```

```java
@Entity
@NoArgsConstructor(access = AccessLevel.PROTECTED)
public class Client {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @ManyToMany
    private List<Books> books;
    
    private String name;
}
```

í•˜ì§€ë§Œ `@ManyToMany`ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤.
`@ManyToMany`ë¥¼ ì‚¬ìš©í•˜ë©´ ë‚´ë¶€ì ìœ¼ë¡œ ìƒˆë¡œìš´ ì—°ê²° í…Œì´ë¸”ì„ ë§Œë“¤ê²Œ ë˜ëŠ”ë°, ì´ëŠ” ì¶”ê°€ì ì¸ ì •ë³´(ê°€ë ¹ ì£¼ë¬¸ ì‹œê°„, ì£¼ë¬¸ ìˆ˜ëŸ‰ ë“±)ì˜ ì‚½ì…ì„ ë¶ˆê°€ëŠ¥í•˜ê²Œ í•˜ê³  ì˜ˆìƒì¹˜ ëª» í•œ ì¿¼ë¦¬ë“¤ì„ ë°œìƒì‹œí‚¬ ìš°ë ¤ê°€ ìˆë‹¤.
ë”°ë¼ì„œ ì—°ê²° í…Œì´ë¸”ìš© ì—”í‹°í‹°ë¥¼ ì§ì ‘ ì¶”ê°€í•˜ëŠ” ê²ƒì´ ë°”ëŒì§í•˜ë‹¤.

ë‹¤ìŒì€ í•˜ë‚˜ì˜ Order ì—”í‹°í‹°ë¥¼ ë§¤ê°œë¡œ ì‚¼ì•„ Book ì—”í‹°í‹°ì™€ Client ì—”í‹°í‹°ì˜ M:N ê´€ê³„ë¥¼ í‘œí˜„í•œ ì˜ˆì‹œì´ë‹¤.

```java
@Entity
@NoArgsConstructor(access = AccessLevel.PROTECTED)
public class Order {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @ManyToOne(fetch = FetchType.LAZY)
    private Client client;
    
    @ManyToOne(fetch = FetchType.LAZY)
    private Book book;
}
```

```java
@Entity
@NoArgsConstructor(access = AccessLevel.PROTECTED)
public class Book {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @OneToMany
    private List<Order> orders;
    
    private String name;
}
```

```java
@Entity
@NoArgsConstructor(access = AccessLevel.PROTECTED)
public class Client {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @OneToMany
    private List<Order> orders;
    
    private String name;
}
```

***
# \[3] Spring Data JPA

> Spring Data JPA, part of the larger Spring Data family, makes it easy to easily implement JPA based repositories. This module deals with enhanced support for JPA based data access layers. It makes it easier to build Spring-powered applications that use data access technologies.

Spring Data JPAëŠ” ë°ì´í„° ì ‘ê·¼ ê³„ì¸µì„ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ëª¨ë“ˆë¡œ, CRUD ë©”ì†Œë“œë¥¼ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.

***

# \[4] ğŸ“– í”„ë¡œê·¸ë¨ êµ¬í˜„ ê³¼ì œ

## Hospital.java

```java
@Entity
@NoArgsConstructor(access = AccessLevel.PROTECTED)
class Hospital {
	@Id
	@GeneratedValue(strategy = GenerationType.IDENTITY)
	private int id;
	
	@OneToMany
	private List<MedicalDepartment> medicalDepartments;
}
```

## MedicalDepartment.java

```java
@Entity
@NoArgsConstructor(access = AccessLevel.PROTECTED)
class MedicalDepartment {
	@Id
	@GeneratedValue(strategy = GenerationType.IDENTITY)
	private int id;
	
	private String name;
	
	@ManyToOne
	private Hospital hospital;
	
	@OneToMany
	private List<Doctor> doctors;
}
```

## Doctor.java

```java
@Entity
@NoArgsConstructor(access = AccessLevel.PROTECTED)
class Doctor {
	@Id
	@GeneratedValue(strategy = GenerationType.IDENTITY)
	private int id;
	
	private String name;
	
	@ManyToOne
	MedicalDepartment medicalDepartment;
	
	@ManyToOne
	Reservation reservation;
}
```

## Patient.java

```java
@Entity
@NoArgsConstructor(access = AccessLevel.PROTECTED)
class Patient {
	@Id
	@GeneratedValue(strategy = GenerationType.IDENTITY)
	private int id;
	
	private String name;
	
	@ManyToOne
	Reservation reservation;
}
```

## Reservation.java

```java
@Entity
@NoArgsConstructor(access = AccessLevel.PROTECTED)
class Reservation {
	@Id
	@GeneratedValue(strategy = GenerationType.IDENTITY)
	private int id;
	
	private String time;
	
	@OneToMany
	List<Doctor> doctors;
	
	@OneToMany
	List<Patient> patients;
}
```